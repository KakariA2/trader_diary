<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–Ω–µ–≤–Ω–∏–∫ —Ç—Ä–µ–π–¥–µ—Ä–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            margin: 10px;
            padding: 10px;
        }

        h1 {
            text-align: center;
            color: #333;
        }

        form {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        form input, form select, form button {
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            flex: 1 1 200px;
        }

        form button {
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 10px;
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            margin-bottom: 20px;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }

        th {
            background-color: #eaeaea;
        }

        /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É —Å–Ω–∏–∑—É */
        .support-box {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff9db;
            border: 1px solid #ffd700;
            border-radius: 8px;
            padding: 10px 14px;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
            user-select: none;
            cursor: default;
            opacity: 1;
            pointer-events: auto;
            white-space: nowrap;
        }

        .support-box a {
            margin: 0 5px;
            text-decoration: none;
            color: #007BFF;
            font-weight: bold;
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 600px) {
            form {
                flex-direction: column;
                align-items: stretch;
            }

            table, thead, tbody, th, td, tr {
                font-size: 0.9em;
            }

            .support-box {
                bottom: 5px;
                font-size: 12px;
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–î–Ω–µ–≤–Ω–∏–∫ —Ç—Ä–µ–π–¥–µ—Ä–∞</h1>

        <div style="margin-top: 20px;">
            <h3>{{ texts['total_profit'] }}:
                <span style="color: {{ 'green' if total_profit >= 0 else 'red' }}">
                    {{ total_profit }}
                </span>
            </h3>

            <h4>{{ texts['profit_by_pair'] }}:</h4>
            <ul>
                {% for pair, profit in profit_by_pair.items() %}
                    <li>{{ pair }}:
                        <span style="color: {{ 'green' if profit >= 0 else 'red' }}">
                            {{ profit }}
                        </span>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <form action="/add" method="POST">
            <input type="text" name="pair" placeholder="–ü–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, EUR/USD)" required>
            <input type="datetime-local" name="date" required>
            <select name="type">
                <option value="Buy">–ö—É–ø–∏—Ç—å</option>
                <option value="Sell">–ü—Ä–æ–¥–∞—Ç—å</option>
            </select>
            <input type="number" name="lot" step="0.01" placeholder="–õ–æ—Ç" required>
            <input type="number" name="profit" step="0.01" placeholder="–ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–æ–∫" required>
            <input type="text" name="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π">
            <button type="submit">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>–ü–∞—Ä–∞</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–¢–∏–ø</th>
                        <th>–õ–æ—Ç</th>
                        <th>–ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–æ–∫</th>
                        <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                    </tr>
                </thead>
                <tbody>
                    {% for trade in trades %}
                    <tr>
                        <td>{{ trade.pair }}</td>
                        <td>{{ trade.date }}</td>
                        <td>{{ trade.type }}</td>
                        <td>{{ trade.lot }}</td>
                        <td>{{ trade.profit }}</td>
                        <td>{{ trade.comment }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- –ë–ª–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
    <!-- –ë–ª–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
<div class="support-box">
    ‚òï –ü–æ–¥–¥–µ—Ä–∂–∏ –ø—Ä–æ–µ–∫—Ç:
    <a href="https://buymeacoffee.com/kakari" target="_blank">BuyMeACoffee</a> |
    <a href="https://yoomoney.ru/to/4100119196832465" target="_blank">–ÆMoney</a>
    <center>
      <p><a href="http://127.0.0.1:5000/feedback">üì© –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</a></p>
      <button id="shareBtn" style="padding:6px 12px; font-size:14px; cursor:pointer; border-radius:5px; border:1px solid #4CAF50; background-color:#4CAF50; color:#fff;">
        üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–æ–º
      </button>
    </center>
</div>

<script>
document.getElementById('shareBtn').onclick = function() {
  if (navigator.share) {
    navigator.share({
      title: document.title,
      text: '–ü–æ—Å–º–æ—Ç—Ä–∏ —ç—Ç–æ—Ç —Ç—Ä–µ–π–¥–µ—Ä—Å–∫–∏–π –¥–Ω–µ–≤–Ω–∏–∫ ‚Äî —É–¥–æ–±–Ω–æ –¥–ª—è —É—á—ë—Ç–∞ —Å–¥–µ–ª–æ–∫!',
      url: window.location.href
    }).catch(err => {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —à–∞—Ä–∏–Ω–≥–µ:', err);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –≤—Ä—É—á–Ω—É—é.');
    });
  } else if (navigator.clipboard) {
    navigator.clipboard.writeText(window.location.href).then(() => {
      alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—ë –¥—Ä—É–≥—É.');
    }).catch(() => {
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.');
    });
  } else {
    alert('–§—É–Ω–∫—Ü–∏—è "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º.');
  }
}
</script>

	

</body>
</html>
